#!/usr/bin/env php
<?php

declare(strict_types=1);

use Psr\Log\LoggerInterface;
use Symfony\Component\Console\Application;

chdir(realpath(dirname(__FILE__)));

require_once realpath(dirname(__FILE__, 2)) . DIRECTORY_SEPARATOR . 'vendor' . DIRECTORY_SEPARATOR . 'autoload.php';

bootstrap();

$container = getDIContainer();

$logger = $container->get(LoggerInterface::class);
$logger->info(sprintf("COMMAND petition %s : %s", uniqid(), $argv[1] ?? 'NO_COMMAND'));

$console = $container->get(Application::class);
$console->run();
